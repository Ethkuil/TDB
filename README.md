# THSS TDB
TDB是面向清华大学软件学院的数据库原理课程开发的一款关系型数据库管理系统。实现了关系型数据增删改查的基本功能，支持多种SQL语句，架构逻辑清晰，适合初学者用于入门数据库内核的设计与实现。

## 架构介绍
TDB包含了session, query engine以及storage engine三个大模块。

其中session模块支持CS架构和无服务启动两种方式，对外提供了可通过Sql进行交互的终端界面。

查询引擎由解析器，分析器，规划器与执行引擎三个主要模块构成，其中执行引擎会在执行具体查询时与存储引擎进行交互，由存储引擎来负责数据的组织与磁盘读写。

## 编译运行
由于session模块的设计，目前本项目仅支持linux与macOS上运行。

本项目基于C++开发，编译运行前确保已经安装了CMake以及C++17以上的环境。


完成开发环境的配置后，可以进行TDB的搭建，首先使用如下git指令将项目拉取到本地。
```git
git clone git@github.com:THSS-DB/TDB.git
```
进入项目的根目录，如果是第一次编译，运行build.sh脚本安装依赖库。
```
bash build.sh init
```
之后对代码进行编译，每当代码有任何修改，直接运行下面脚本就可以重新编译
```
bash build.sh
```
如果使用上面的命令导致编译卡死，停留在某个进度止步不前，可以使用下面的命令限制并发数
```
bash build.sh --make -j4
```

## 致谢
该项目的session模块参考了OceanBase的net模块实现，查询引擎则基于IoTDB的架构进行简化。
感谢这些项目开源他们的代码。
 
